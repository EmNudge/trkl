function t(t,s){this.t=0,this.s=-1,this.i=[],this.e=[],this.r=s,s&&this.n(),this.u=s?this.u:t}var s=null,i=[],e=function(s){var i=new t(s),e=function(){return arguments.length?i.h(arguments[0]):i.a()};return e.subscribe=i.sub.bind(i),e.unsubscribe=i.unsub.bind(i),e};e.computed=function(s){var i=new t(0,s),e=i.a.bind(i);return e.subscribe=i.sub.bind(i),e.unsubscribe=i.unsub.bind(i),e},e.from=function(t){var s=e();return t(s),s};var r={};t.prototype=r,r.sub=function(t,s){-1==this.e.indexOf(t)&&this.e.push(t),s&&t(this.u,this.l)},r.unsub=function(t){var s=this.e.indexOf(t);s>-1&&this.e.splice(s,1)},r.o=function(){if(this.e.length)for(var t=0;t<this.e.length;t++)this.c(this.e[t])},r.c=function(t){var s;try{t(this.u,this.l)}catch(t){s=t}s&&window.setTimeout(function(){throw s},0)},r.a=function(){return s&&-1==this.i.indexOf(s)&&(this.i.push(s),this.t&&s._()),this.u},r.h=function(s){this.d=this.u,this.b(),this.u=s;try{this.f()}catch(t){throw this.v(),t}return t.p(),this.l=this.d,this.o(),this.u},r.n=function(){s=this;var t;try{this.u=this.r()}catch(s){t=s}if(s=null,t)throw t},r.b=function(){for(var t=0;t<this.i.length;t++)this.i[t]._()},r._=function(){if(1==++this.t){this.d=this.u;for(var t=0;t<this.i.length;t++)this.i[t]._();this.S()}},r.S=function(){i[this.s=i.length]=this},r.g=function(){i[this.s]=null,this.s=-1},r.f=function(){for(var t=0;t<this.i.length;t++)this.i[t].m()},r.m=function(){1==this.t&&this.r&&this.n(),0==--this.t&&(this.g(),this.f(),this.l=this.d,this.o())},t.p=function(){for(var s,e=0;e<i.length;e++)if(null!==i[e]){s=i[e];break}i.length=0,s&&t.w(s)},t.w=function(t){throw Error("Circular dependency detected. Trkl has stopped. Suspicious function is: "+t.r)},r.v=function(){this.u=this.d,this.t=0,this.g();for(var t=0;t<this.i.length;t++)this.i[t].v()},"object"==typeof window?window.trkl=e:module.exports=e;